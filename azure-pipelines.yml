# Azure Static Web Apps CI/CD pipeline for Darwin Self-Healing Landing Page
# Generated by Avila Manager - 2025-01-13

trigger:
  - main
  - develop

pool:
  vmImage: "ubuntu-latest"

steps:
  - checkout: self
    submodules: true

  - task: AzureStaticWebApp@0
    inputs:
      azure_static_web_apps_api_token: $(AZURE_STATIC_WEB_APPS_API_TOKEN)
      action: "upload"
      app_location: "/"
      api_location: "api"
      output_location: "build"
      skip_app_build: true
      verbose: true
    env:
      AZURE_STATIC_WEB_APPS_API_TOKEN: $(AZURE_STATIC_WEB_APPS_API_TOKEN)

  - task: AzureStaticWebApp@0
    inputs:
      azure_static_web_apps_api_token: $(AZURE_STATIC_WEB_APPS_API_TOKEN)
      action: "close"
